CREATE DATABASE swiftbank;

USE swiftbank;

-- Users Table--
CREATE TABLE `users` ( `user_id` bigint NOT NULL AUTO_INCREMENT, 
`first_name` varchar(255) NOT NULL, 
`last_name` varchar(255) NOT NULL, 
`username` varchar(255) NOT NULL, 
`password` varchar(255) NOT NULL, 
`role` varchar(255) DEFAULT NULL CHECK (`role` in ('USER', 'ADMIN')), 
`email` varchar(255) NOT NULL, 
`phone_number` varchar(255) NOT NULL, PRIMARY KEY (`user_id`), 
UNIQUE KEY `username` (`username`),
 UNIQUE KEY `email` (`email`), 
 UNIQUE KEY `UK_6dotkott2kjsp8vw4d0m25fb7` (`email`), 
 UNIQUE KEY `UK9q63snka3mdh91as4io72espi` (`phone_number`) );


-- Accounts Table --
CREATE TABLE `accounts` ( `account_number` bigint NOT NULL AUTO_INCREMENT, 
`user_id` bigint NOT NULL, 
`account_type` varchar(255) NOT NULL, 
`balance` double NOT NULL, PRIMARY KEY (`account_number`),
 UNIQUE KEY `UK_6kplolsdtr3slnvx97xsy2kc8` (`account_number`),
  KEY `accounts_ibfk_1` (`user_id`), 
  CONSTRAINT `accounts_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`user_id`) );

-- Transactions Table --
CREATE TABLE `transactions` 
( `transaction_id` bigint NOT NULL AUTO_INCREMENT,
 `account_id` bigint NOT NULL, `transaction_type` varchar(255) NOT NULL, 
 `transaction_to` bigint DEFAULT NULL, `amount` double NOT NULL, 
 `transaction_date` timestamp NULL DEFAULT CURRENT_TIMESTAMP, 
 PRIMARY KEY (`transaction_id`), 
 KEY `FK20w7wsg13u9srbq3bd7chfxdh` (`account_id`),
 CONSTRAINT `FK20w7wsg13u9srbq3bd7chfxdh` FOREIGN KEY (`account_id`) REFERENCES `accounts` (`account_number`) ON DELETE CASCADE );
